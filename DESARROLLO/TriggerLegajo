use bdd2;
DELIMITER $$
create trigger participante_bi before insert on participante for each row 
begin
set @mi_tabla='participante';
set @hay_dato=0;
call numeradorCero(@mi_tabla,@hay_dato);
if(select @hay_dato !=0) then
begin
insert into participante(id_legajo)
select siguiente
from numerador
where numerador.tabla='participante';
update numerador
set siguiente=siguiente+1
where numerador.tabla='participante';
end;
else
insert into numerador(tabla, siguiente)
values('participante',1);
end if;
end;
$$
DELIMITER ;
